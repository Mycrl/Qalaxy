<html>
    <head>
        <title>DEMO</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
        <style>* { margin: 0; padding: 0; }</style>
    </head>
    <body>
        <canvas id="canvas"/>
    </body>
    <script>
        function rand(rang) {
            return Math.ceil(Math.random() * rang)
        }
    </script>
    <script>
        function mock() {
            return new Array(rand(500)).fill({}).map(() => ({
                text: new Array(rand(20)).fill(0).map(x => rand(10)).join(""),
                color: `rgba(${new Array(3).fill(0).map(() => rand(255))}, 1)`
            }))
        }
    </script>
    <script src="index.js"></script>
    <script type="module">
        // import init, { Qalaxy } from "./pkg/qalaxy.js"
    
        // onload & init wasm.
        window.onload = () => {
            const { clientWidth, clientHeight } = document.documentElement
            
            // 画布实例
            // 弹幕插件实例
            const canvas = document.getElementById("canvas")
            const qalaxy = new Qalaxy({
                el: canvas,
                rate: 3,
                default: {
                    opacity: 0.7,
                    size: 14,
                    font: "serif",
                    color: "#fff"
                }
            })
        
            // 画布全屏
            canvas.width = clientWidth
            canvas.height = clientHeight
      
            // 推送弹幕
            // 运行动画
            setInterval(() => qalaxy.append(mock()), 1500)
        }
    </script>
</html>
